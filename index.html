<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skaner Metadanych EXIF</title>
    <script src="https://cdn.jsdelivr.net/npm/exifreader@4.12.0/dist/exif-reader.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; max-width: 900px; margin: 0 auto; padding: 20px; background-color: #f4f4f9; }
        .container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; }
        #drop-zone { border: 2px dashed #007bff; border-radius: 5px; padding: 40px; text-align: center; color: #007bff; cursor: pointer; transition: 0.3s; margin-bottom: 20px; }
        #drop-zone:hover { background: #e7f1ff; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { text-align: left; padding: 12px; border-bottom: 1px solid #ddd; }
        th { background-color: #007bff; color: white; width: 40%; }
        tr:hover { background-color: #f1f1f1; }
        .preview { max-width: 100%; max-height: 300px; display: block; margin: 10px auto; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <h1>Czytnik Metadanych</h1>
    
    <div id="drop-zone">
        Przeciągnij zdjęcie tutaj lub kliknij, aby wybrać plik
        <input type="file" id="file-input" accept="image/*" style="display: none;">
    </div>

    <img id="image-preview" class="preview" style="display: none;">

    <div id="results">
        <table id="metadata-table" style="display: none;">
            <thead>
                <tr>
                    <th>Parametr</th>
                    <th>Wartość</th>
                </tr>
            </thead>
            <tbody id="metadata-body"></tbody>
        </table>
    </div>
</div>

<script>
    const tlumaczenia = {
        "Bits Per Sample": "Głębia bitowa",
        "Image Height": "Wysokość obrazu",
        "Image Width": "Szerokość obrazu",
        "Color Components": "Składowe koloru",
        "Subsampling": "Podpróbkowanie",
        "JFIF Version": "Wersja JFIF",
        "Resolution Unit": "Jednostka rozdzielczości",
        "XResolution": "Rozdzielczość X",
        "YResolution": "Rozdzielczość Y",
        "JFIF Thumbnail Width": "Szerokość miniatury JFIF",
        "JFIF Thumbnail Height": "Wysokość miniatury JFIF",
        "ImageLength": "Długość obrazu",
        "Make": "Producent aparatu",
        "Orientation": "Orientacja zdjęcia",
        "DateTime": "Data i czas",
        "GPS Info IFD Pointer": "Wskaźnik informacji GPS",
        "ImageWidth": "Szerokość obrazu (EXIF)",
        "Model": "Model urządzenia",
        "Software": "Oprogramowanie",
        "YCbCrPositioning": "Pozycjonowanie YCbCr",
        "ExifOffset": "Wskaźnik danych EXIF",
        "ExifVersion": "Wersja EXIF",
        "ExposureBiasValue": "Kompensacja ekspozycji",
        "ExposureProgram": "Program ekspozycji",
        "ColorSpace": "Przestrzeń kolorów",
        "MaxApertureValue": "Maksymalna przysłona",
        "BrightnessValue": "Jasność",
        "FlashpixVersion": "Wersja Flashpix",
        "DateTimeOriginal": "Data wykonania zdjęcia",
        "SubSecTimeOriginal": "Ułamki sekund (oryginał)",
        "WhiteBalance": "Balans bieli",
        "InteropOffset": "Wskaźnik interoperacyjności",
        "ExposureMode": "Tryb ekspozycji",
        "ExposureTime": "Czas naświetlania",
        "Flash": "Lampa błyskowa",
        "SubSecTime": "Ułamki sekund",
        "FNumber": "Przysłona (F)",
        "ISOSpeedRatings": "Czułość ISO",
        "FocalLengthIn35mmFilm": "Ogniskowa (ekwiwalent 35mm)",
        "SubSecTimeDigitized": "Ułamki sekund (zapis)",
        "DigitalZoomRatio": "Zoom cyfrowy",
        "DateTimeDigitized": "Data zapisu cyfrowego",
        "ShutterSpeedValue": "Wartość migawki (APEX)",
        "MeteringMode": "Tryb pomiaru światła",
        "FocalLength": "Ogniskowa obiektywu",
        "SensitivityType": "Typ czułości",
        "SceneCaptureType": "Tryb przechwytywania sceny",
        "LightSource": "Źródło światła",
        "GPSLatitude": "Szerokość geograficzna (GPS)",
        "GPSAltitude": "Wysokość n.p.m.",
        "GPSLatitudeRef": "Kierunek szerokości (N/S)",
        "GPSSpeed": "Prędkość (GPS)",
        "GPSProcessingMethod": "Metoda wyznaczania pozycji",
        "GPSAltitudeRef": "Odniesienie wysokości",
        "GPSSpeedRef": "Jednostka prędkości",
        "GPSLongitudeRef": "Kierunek długości (E/W)",
        "GPSTimeStamp": "Czas GPS",
        "GPSLongitude": "Długość geograficzna (GPS)",
        "GPSDateStamp": "Data GPS",
        "InteroperabilityIndex": "Indeks interoperacyjności",
        "Preferred CMM type": "Typ CMM profilu",
        "Profile Version": "Wersja profilu",
        "Profile/Device class": "Klasa profilu",
        "Color Space": "Dane przestrzeni kolorów",
        "Connection Space": "Przestrzeń połączeń profilu",
        "ICC Profile Date": "Data profilu ICC",
        "ICC Signature": "Sygnatura pliku profilu",
        "Primary Platform": "Główna platforma",
        "Device Manufacturer": "Producent urządzenia (profil)",
        "Device Model": "Model urządzenia (profil)",
        "Rendering Intent": "Sposób renderowania",
        "Profile Creator": "Twórca profilu",
        "ICC Description": "Opis profilu ICC",
        "ICC Copyright": "Prawa autorskie profilu"
    };

    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const metadataTable = document.getElementById('metadata-table');
    const metadataBody = document.getElementById('metadata-body');
    const imgPreview = document.getElementById('image-preview');

    dropZone.onclick = () => fileInput.click();

    fileInput.onchange = e => handleFile(e.target.files[0]);

    dropZone.ondragover = e => { e.preventDefault(); dropZone.style.background = '#e7f1ff'; };
    dropZone.ondragleave = () => dropZone.style.background = 'transparent';
    dropZone.ondrop = e => {
        e.preventDefault();
        handleFile(e.dataTransfer.files[0]);
    };

    async function handleFile(file) {
        if (!file) return;

        imgPreview.src = URL.createObjectURL(file);
        imgPreview.style.display = 'block';

        try {
            const tags = await ExifReader.load(file);
            delete tags['MakerNote'];

            metadataBody.innerHTML = '';
            
            for (const [klucz, dane] of Object.entries(tags)) {
                const nazwaPolska = tlumaczenia[klucz] || klucz;
                const wartosc = dane.description || dane.value;

                if (wartosc && typeof wartosc !== 'object') {
                    const row = `<tr><td>${nazwaPolska}</td><td>${wartosc}</td></tr>`;
                    metadataBody.innerHTML += row;
                }
            }

            metadataTable.style.display = 'table';
        } catch (error) {
            alert('Błąd podczas czytania metadanych: ' + error.message);
        }
    }
</script>

</body>
</html>